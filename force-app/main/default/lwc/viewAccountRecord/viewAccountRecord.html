<template>
    <div class="component-background">
        <template if:true={record}>
            <div class="card-container">
                <div class="title-slot">

                    <!-- Show a header with the icon, object api name, and record name -->
                    <lightning-layout>
                        <lightning-layout-item class="slds-p-around_small">
                            <lightning-icon icon-name={cardIconName} size="large" data-id="iconId" data-name={cardIconName}></lightning-icon>
                        </lightning-layout-item>
                    
                        <lightning-layout-item class="slds-p-vertical_small">
                            <lightning-layout multiple-rows>
                                <lightning-layout-item size=12 class="object-name" data-id="objectApiNameId">
                                    <p style="word-break: break-all;">{objectApiName}</p>
                                </lightning-layout-item>
                                <lightning-layout-item size=12 class="record-name" data-id="nameId">
                                    <p style="word-break: break-all;">{name}</p>
                                </lightning-layout-item>
                            </lightning-layout>
                        </lightning-layout-item>
                    </lightning-layout>
                </div>

                <div class="body-slot">
                    <!-- use lightning-record-form to show the compact layout. here, we use 'view' as the mode which allows edits too -->
                    <lightning-record-form record-id={recordId} object-api-name={objectApiName} layout-type="Compact"
                        columns="1" mode="readonly">
                    </lightning-record-form>
                </div>

                <!-- show any draft information for this record -->
                <template if:true={draftDetails} >
                    <lightning-accordion allow-multiple-sections-open="true">
                        <lightning-accordion-section name="draftEdits" label="Draft - Original Values">
                            <ul class="slds-list_dotted">
                                <template for:each={draftDetails} for:item="draftItem">
                                    <li key={draftItem.fieldName}>
                                        {draftItem.fieldName}={draftItem.value}
                                    </li>
                                </template>
                            </ul>
                        </lightning-accordion-section>
                    </lightning-accordion>
                </template>
            </div>
        </template>
    </div>
</template>